(function(){"use strict";var t={8666:function(t,e,s){var o=s(5471),a=s(8505),i=s(6750),n=s(8400),r=s(986),l=s(6521),c=s(1689),d=s(1770),h=s(9456),u=s(2987),p=s(1075),g=s(3954),m=s(24),f=s(7954),y=s(6848),v=s(1735),b=function(){var t=this,e=t._self._c;return e(a.A,{attrs:{id:"root"}},["/LoginRegister"!=t.$route.path?[e(y.A,{staticClass:"d-none d-sm-none d-md-flex",attrs:{app:""},model:{value:t.drawer,callback:function(e){t.drawer=e},expression:"drawer"}},[e(p.A,{staticClass:"mt-12 d-flex flex-column"},[e(g.pr,[e(g.UZ,{staticStyle:{"font-weight":"bold","font-size":"40px"}},[t._v("游学系统")]),e(g.w,{staticStyle:{"font-weight":"bold","font-size":"30px"}},[t._v("Welcome!")])],1)],1),e(d.A,{staticClass:"mx-8 my-2",style:{"border-bottom-width":"1px"}}),e(g.UZ,{staticClass:"ml-5 mb-1 indigo--text text-h5 font-weight-black"},[e(h.A,{staticClass:"mb-1 mr-1",attrs:{color:"indigo",large:""}},[t._v(" mdi-apple-safari ")]),t._v(" NaviBar ")],1),e(d.A,{staticClass:"mx-8 my-2",style:{"border-bottom-width":"1px"}}),e(u.A,{attrs:{dense:"",nav:""}},t._l(t.menuItems,(function(s){return e(p.A,{key:s.title,staticClass:"align-center",attrs:{to:s.to,link:"",mandatory:"",color:"indigo"}},[e(m.A,[e(h.A,{attrs:{color:s.iconColor}},[t._v(t._s(s.icon))])],1),e(g.pr,[e(g.UZ,{staticStyle:{"font-size":"16px","font-weight":"bold"}},[t._v(t._s(s.title))])],1)],1)})),1),e(r.A,{staticStyle:{background:"none"},attrs:{fixed:""}},[e(c.A,{staticClass:"d-flex flex-row-reverse justify-center mb-8",staticStyle:{background:"none"},attrs:{flat:"",hover:"",light:""}},[e(l.A,{staticClass:"mt-7 mb-7",attrs:{text:"",small:"",depressed:"",fab:"",plain:"",block:"",onclick:"window.open('https://github.com/112292454/DSlab.git')"}},[e(h.A,[t._v(" mdi-github ")])],1)],1)],1)],1),e(i.A,{attrs:{elevation:"5",app:"",color:"indigo",dark:"",dense:"",border:"bottom"}},[e("div",{staticClass:"d-flex align-center"},[e(n.A,{on:{click:function(e){e.stopPropagation(),t.drawer=!t.drawer}}}),e(v.sw,[t._v(t._s(t.currentItemTitle))])],1)])]:t._e(),e(f.A,[e("router-view")],1)],2)},w=[],A={name:"App",data(){return{drawer:!1,menuItems:[{title:"游学推荐",icon:"mdi-map",iconColor:"green",to:"/TravelRecommend"},{title:"路线规划",icon:"mdi-navigation-variant",iconColor:"purple",to:"/RoutePlan"},{title:"场所查询",icon:"mdi-magnify",iconColor:"blue",to:"/PlaceSearch"},{title:"游学日记",icon:"mdi-book",iconColor:"brown",to:"/DiaryManage"},{title:"美食推荐",icon:"mdi-pasta",iconColor:"deep-orange",to:"/FoodRecommend"},{title:"个人主页",icon:"mdi-account-circle",iconColor:"indigo",to:"/Userprofile"}],currentItemTitle:"欢迎来到游学系统"}},watch:{$route:{handler(t){const e=this.menuItems.find((e=>e.to===t.path));this.currentItemTitle=e?e.title:"编辑日记"},immediate:!0}}},x=A,_=s(1656),C=(0,_.A)(x,b,w,!1,null,null,null),k=C.exports,S=s(173),I=s(8834),N=s(6278),T=s(980),j=s(1875),M=s(5443),F=s(9584),D=s(8170),O=s(9940),P=function(){var t=this,e=t._self._c;return e(a.A,{attrs:{id:"auth"}},[e(f.A,{staticClass:"bg align-center"},[e(c.A,{staticClass:"mx-auto my-auto d-flex flex-row flex-wrap",staticStyle:{background:"none"},attrs:{"max-width":"800px",elevation:"8"}},[e(c.A,{staticClass:"d-flex flex-column justify-center rounded-0",staticStyle:{"background-color":"#F5F5F5"},attrs:{width:"440px",elevation:"0"}},[e("span",{staticClass:"text-h5 black--text font-weight-black",staticStyle:{position:"absolute",top:"30px",left:"30px"}},[e(h.A,{staticClass:"mr-2 mb-1",attrs:{medium:"",color:"black",large:""}},[t._v("mdi-school ")]),t._v(" BuptTravel ")],1),e(l.A,{staticClass:"px-0",staticStyle:{position:"absolute",top:"36px",right:"15px"},attrs:{rounded:"",text:"","x-small":"",depressed:"",onclick:"window.open('https://github.com/112292454/DSlab.git')"}},[e(h.A,{attrs:{medium:"",color:"black"}},[t._v(" mdi-github ")])],1),e(T.A,{staticClass:"mx-auto mt-12",attrs:{src:s(5248),"max-height":"380px","max-width":"400px"}})],1),e(c.A,{staticClass:"pa-6 ml-auto rounded-0",attrs:{width:"360px",height:"480px",elevation:"0"}},[e(I.ri,{staticClass:"text-center justify-center py-6"},[e("h2",{staticClass:"font-weight-bold text-h4 basil--text"},[t._v(" Welcome ! ")])]),e(D.A,{attrs:{"background-color":"transparent",color:"black",centered:""}},[e(M.A,{key:0},[t._v("Log in")]),e(M.A,{key:1},[t._v("Sign up")]),e(F.A,{key:0},[e(N.A,{staticClass:"px-12 pt-6"},[e(O.A,{attrs:{label:"Username","append-icon":"mdi-account-box-edit-outline",clearable:""},model:{value:t.username1,callback:function(e){t.username1=e},expression:"username1"}}),e(O.A,{staticClass:"mb-6",attrs:{label:"Password",type:t.showPassword?"text":"password","append-icon":t.showPassword?"mdi-eye-off":"mdi-eye",clearable:""},on:{"click:append":function(e){t.showPassword=!t.showPassword}},model:{value:t.passwd1,callback:function(e){t.passwd1=e},expression:"passwd1"}}),e(l.A,{staticClass:"white--text font-weight-bold",attrs:{loading:t.loading,disabled:t.loading,color:"blue accent-2",outlined:"",rounded:""},on:{click:function(e){t.login(),t.loader="loading"}}},[t._v(" Log in ")])],1)],1),e(F.A,{key:1},[e(N.A,{staticClass:"px-12 pt-2"},[e(O.A,{attrs:{label:"Username",clearable:""},model:{value:t.username2,callback:function(e){t.username2=e},expression:"username2"}}),e(O.A,{attrs:{label:"Password",clearable:""},model:{value:t.passwd2,callback:function(e){t.passwd2=e},expression:"passwd2"}}),e(O.A,{attrs:{label:"Email","append-icon":"mdi-email-check-outline",rules:[t.rules.email],clearable:""},model:{value:t.email,callback:function(e){t.email=e},expression:"email"}}),e(O.A,{attrs:{label:"Phonenumber","append-icon":"mdi-phone",rules:[t.rules.phone],clearable:""},model:{value:t.phonenumber,callback:function(e){t.phonenumber=e},expression:"phonenumber"}}),e(j.A,{attrs:{label:"Interest",items:t.items,placeholder:"请选择你的兴趣",dense:"","append-icon":"mdi-heart",multiple:""},model:{value:t.interestName,callback:function(e){t.interestName=e},expression:"interestName"}}),e(l.A,{staticClass:"mt-6 white--text font-weight-bold",attrs:{loading:t.loading,disabled:t.loading,color:"blue accent-2",outlined:"",rounded:""},on:{click:function(e){t.signup(),t.loader="loading"}}},[t._v(" Sign up ")])],1)],1)],1)],1)],1)],1)],1)},E=[],$=(s(4114),{name:"LoginRegster",data:()=>({username1:"",passwd1:"",username2:"",passwd2:"",email:"",phonenumber:"",loading:!1,loader:null,showPassword:!1,interestName:"",interests:[],items:[{text:"历史遗迹",value:1},{text:"自然景观",value:2},{text:"公园",value:3},{text:"博物馆/科技馆",value:4},{text:"游乐园",value:5},{text:"动物园/植物园",value:6},{text:"学校",value:7}],rules:{email:t=>{const e=/^[\w-]+(\.[\w-]+)*@[\w-]+(\.[\w-]+)+$/;return e.test(t)||"Invalid email format."},phone:t=>{const e=/^1[3456789]\d{9}$/;return e.test(t)||"Invalid phone number format."}}}),watch:{loader(){const t=this.loader;this[t]=!this[t],setTimeout((()=>this[t]=!1),2e3),this.loader=null}},methods:{login:function(){this.$axios({method:"post",url:"http://10.129.37.114:8321/login",data:{userName:this.username1,userPassword:this.passwd1},headers:{"Content-Type":"application/json"}}).then((t=>{console.log(t.data),"0"===t.data.code?(window.alert("登录成功"),this.$router.push("/TravelRecommend")):window.alert("账号或密码错误，请重试!如未注册，请先注册！")})).catch((function(t){console.log(t),this.loading=!1}))},signup:function(){const t=/^[\w-]+(\.[\w-]+)*@[\w-]+(\.[\w-]+)+$/;if(!t.test(this.email))return void window.alert("请输入有效的邮箱地址");const e=/^1[3456789]\d{9}$/;e.test(this.phonenumber)?this.$axios({method:"post",url:"http://10.129.37.114:8321/register",data:{userName:this.username2,userPassword:this.passwd2,email:this.email,phoneNumber:this.phonenumber,interests:this.interestName.map((t=>{const e=this.items.find((e=>e.value===t));return{interestId:t,interestName:e?e.text:""}}))},headers:{"Content-Type":"application/json"}}).then((t=>{console.log(t.data),"0"===t.data.code?window.alert("注册成功,请登录"):window.alert("注册失败，请重试")})).catch((function(t){console.log(t)})):window.alert("请输入有效的电话号码")}}}),R=$,B=(0,_.A)(R,P,E,!1,null,null,null),L=B.exports,W=s(3882),Q=s(4163),H=s(1526),z=s(8987),U=s(8412),Y=function(){var t=this,e=t._self._c;return e(a.A,[e(N.A,[e(N.A,{staticClass:"pb-0",attrs:{"d-flex":""}},[e(l.A,{staticClass:"mr-2 font-weight-black",attrs:{rounded:"",color:"indigo",dark:""},on:{click:t.toggleSearchMode}},[e(h.A,{attrs:{left:""}},[t._v(" "+t._s(t.icon))]),t._v(" "+t._s(t.text))],1),e("div",{staticStyle:{position:"relative",width:"80%"}},[e(z.A,{attrs:{"offset-y":"","nudge-top":"20","close-on-content-click":!1},scopedSlots:t._u([{key:"activator",fn:function({on:s,attrs:o}){return[e(O.A,t._g(t._b({staticStyle:{width:"100%"},attrs:{label:"搜索景点或学校","append-icon":"mdi-magnify",clearable:"",outlined:"",dense:""},on:{input:t.search},model:{value:t.searchContent,callback:function(e){t.searchContent=e},expression:"searchContent"}},"v-text-field",o,!1),s))]}}]),model:{value:t.display,callback:function(e){t.display=e},expression:"display"}},[e(u.A,[e("router-link",{staticClass:"text-decoration-none",attrs:{to:"/RoutePlan"}},t._l(t.items,(function(s){return e(p.A,{key:s.mapId,staticStyle:{width:"100%"},attrs:{dense:""},on:{click:function(e){return t.sendMapId(s.mapType)}}},[e(h.A,{staticClass:"mr-3"},[t._v(t._s("学校"===s.mapType?"mdi-school":"mdi-flower-tulip"))]),e(g.UZ,{staticClass:"font-weight-bold text--secondary mr-4"},[e(U.A,{attrs:{align:"center",justify:"space-between"}},[e(H.A,{attrs:{cols:"auto"}},[t._v(t._s(s.mapName))]),e(H.A,{attrs:{cols:"auto"}},[e(h.A,{staticClass:"mr-1",attrs:{small:""}},[t._v("mdi-fire")]),e("span",{staticClass:"ml-1 font-weight-bold text--secondary text-caption mr-2"},[t._v(t._s(String(s.population).padEnd(2," ")))]),e(h.A,{staticClass:"mr-1",attrs:{small:""}},[t._v("mdi-thumb-up")]),e("span",{staticClass:"ml-1 font-weight-bold text--secondary text-caption mr-2"},[t._v(t._s(s.score.toFixed(2)))])],1)],1)],1),e(g.w,{domProps:{innerHTML:t._s(t.highlightSearchQuery(s.description))}})],1)})),1)],1)],1)],1)],1),e(N.A,{attrs:{"pt-0":""}},[e(Q.A,{attrs:{column:"","active-class":"indigo--text",mandatory:""},model:{value:t.selectedFilters,callback:function(e){t.selectedFilters=e},expression:"selectedFilters"}},[e(W.A,{attrs:{filter:"",outlined:""}},[t._v("热度")]),e(W.A,{attrs:{filter:"",outlined:""}},[t._v("评价")])],1),e(N.A,[e(U.A,t._l(t.items,(function(s){return e(H.A,{key:s.mapId,attrs:{cols:"4"}},[e(c.A,{attrs:{hover:""}},[e(T.A,{attrs:{src:s.imageId,height:"200px",cover:""}}),e(I.ri,{staticClass:"font-weight-bold mx-1"},[t._v(t._s(s.mapName)+" "),e(W.A,{staticClass:"ml-2",attrs:{color:"indigo",small:"","text-color":"white"}},[t._v(t._s(s.mapType))])],1),e(I.OQ,{staticClass:"description-clamp-2"},[t._v(t._s(s.description))]),e(I.SL,{staticClass:"d-flex justify-space-between"},[e("div",{staticClass:"d-flex"},[e("div",[e(h.A,{attrs:{color:"orange"}},[t._v("mdi-fire")]),e("span",{staticClass:"ml-1 font-weight-bold text--secondary"},[t._v(t._s(s.population))])],1),e("div",{staticClass:"ml-2"},[e(h.A,{attrs:{color:"indigo"}},[t._v("mdi-thumb-up")]),e("span",{staticClass:"ml-1 font-weight-bold text--secondary"},[t._v(t._s(s.score.toFixed(2)))])],1),e("div",{staticClass:"ml-1"},[e(h.A,{attrs:{color:"red"}},[t._v("mdi-map-marker")]),e("span",{staticClass:"ml-1 font-weight-bold text--secondary"},[t._v(t._s(s.countryRegion))])],1)]),e("div",[e("router-link",{attrs:{to:"/RoutePlan"}},[e(l.A,{staticClass:"transparent-btn text--secondary font-weight-bold text-decoration-none",attrs:{rounded:"",elevation:"0"},on:{click:function(e){return t.sendMapId(s.mapType)}}},[t._v("去游学"),e(h.A,{staticClass:"ml-1",attrs:{color:"gray",right:""}},[t._v("mdi-chevron-right")])],1)],1)],1)])],1)],1)})),1)],1)],1)],1)],1)},X=[],Z={data:()=>({isSchool:2,searchContent:"",searchResults:[],items:[],selectedFilters:0,display:!1}),computed:{orderType:function(){return 0===this.selectedFilters?"population":"score"},searchType(){switch(this.isSchool){case 0:return"学校";case 1:return"景点";case 2:return"";default:return""}},icon(){switch(this.isSchool){case 0:return"mdi-school";case 1:return"mdi-flower-tulip";case 2:return"mdi-search-web";default:return""}},text(){switch(this.isSchool){case 0:return"搜索学校";case 1:return"搜索景点";case 2:return"默认搜索";default:return""}}},watch:{orderType(t){console.log("orderType:",t),this.$axios.post("http://10.129.37.114:8321/search",{orderType:t,searchType:this.searchType,searchContent:this.searchContent}).then((t=>{this.items=t.data.data,console.log("从后端返回的数据:",t.data.data),console.log("searchContent:",this.searchContent),console.log("searchType:",this.searchType)})).catch((t=>{console.error(t)}))},selectedFilters(t){console.log("selectedFilters:",t)}},methods:{search(){this.$axios({method:"post",url:"http://10.129.37.114:8321/search",data:{orderType:this.orderType,searchType:this.searchType,searchContent:this.searchContent},headers:{"Content-Type":"application/json"}}).then((t=>{"0"===t.data.code?(this.items=t.data.data,console.log(this.items)):window.alert("搜索失败，请重试")})).catch((function(t){console.log(t)}))},sendMapId(t){let e;switch(t){case"学校":e="8";break;case"景点":e="9";break;default:e="8"}this.$axios.get("http://10.129.37.114:8321/getMapMassage",{params:{mapId:e}}).then((t=>{this.$store.commit("setRouteData",{data:t.data,mapId:e}),console.log("后端数据成功得到",t.data),console.log("mapId:",e)})).catch((t=>{console.error("请求错误:",t)}))},highlightSearchQuery(t){const e=t.indexOf(this.searchContent);if(-1===e)return t;const s=Math.max(0,e-20),o=Math.min(t.length,e+this.searchContent.length+40),a=`<strong>${this.searchContent}</strong>`;return t.slice(s,e)+a+t.slice(e+this.searchContent.length,o)},selectResult(t){console.log("选中的搜索结果:",t)},toggleSearchMode(){this.isSchool=(this.isSchool+1)%3},hideList(){this.display=!1},mounted(){console.log(this.orderType),console.log("selectedFilters:",this.selectedFilters),console.log("items:",this.items)}},created(){this.$axios.post("http://10.129.37.114:8321/search",{orderType:this.orderType,searchType:this.searchType,searchContent:this.searchContent}).then((t=>{this.items=t.data.data})).catch((t=>{console.error(t)}))}},K=Z,G=(0,_.A)(K,Y,X,!1,null,null,null),q=G.exports,J=s(8230),V=s(8669),tt=s(7614),et=s(7402),st=function(){var t=this,e=t._self._c;return e(a.A,[e(c.A,{staticClass:"mb-8",attrs:{hover:"",dense:""}},[e(J.A,[e(U.A,{staticClass:"mx-3 mt-3"},[e(H.A,{staticClass:"align-self-center",attrs:{cols:"2"}},[e(O.A,{staticClass:"ml-0",attrs:{outlined:"",rounded:"",dense:"",small:"",label:"当前位置","prepend-inner-icon":"mdi-map-marker"},model:{value:t.startSelectedNode,callback:function(e){t.startSelectedNode=e},expression:"startSelectedNode"}})],1),e(H.A,{staticClass:"align-self-center",attrs:{cols:"5"}},[e(O.A,{staticClass:"ml-2",attrs:{outlined:"",rounded:"",dense:"",small:"",label:"目的地",clearable:"","prepend-inner-icon":"mdi-map-marker",placeholder:"输入多个景点请以空格分隔"},model:{value:t.finalSelectedNode,callback:function(e){t.finalSelectedNode=e},expression:"finalSelectedNode"}})],1),e(l.A,{staticClass:"mr-2 font-weight-black align-self-center",attrs:{rounded:"",color:"indigo",dark:""},on:{click:t.orderedTour}},[e(h.A,[t._v("mdi-navigation-variant")]),t._v("顺序游览 ")],1),e(l.A,{staticClass:"mr-2 font-weight-black align-self-center",attrs:{rounded:"",color:"indigo",dark:""},on:{click:t.unorderedTour}},[e(h.A,[t._v("mdi-navigation-variant")]),t._v("无序游览 ")],1),e(H.A,{attrs:{cols:""}},[e(Q.A,{attrs:{column:"","active-class":"indigo--text font-weight-black",mandatory:""},model:{value:t.strategy,callback:function(e){t.strategy=e},expression:"strategy"}},[e(W.A,{attrs:{value:"distance",outlined:""}},[e(h.A,{attrs:{left:""}},[t._v("mdi-transit-connection-variant")]),t._v("距离最短")],1),e(W.A,{attrs:{value:"time",outlined:""}},[e(h.A,{attrs:{left:""}},[t._v("mdi-timer-sand")]),t._v("时间最短")],1)],1),e(tt.A,{attrs:{row:"",dense:""},model:{value:t.transportation,callback:function(e){t.transportation=e},expression:"transportation"}},[e(V.A,{attrs:{value:0},scopedSlots:t._u([{key:"label",fn:function(){return[e(h.A,{staticClass:"mr-2",attrs:{color:"indigo"}},[t._v("mdi-walk")]),t._v(" 仅步行 ")]},proxy:!0}])}),e(V.A,{attrs:{value:1},scopedSlots:t._u([{key:"label",fn:function(){return[e(h.A,{attrs:{color:"indigo"}},[t._v("mdi-bike")]),e(h.A,{attrs:{color:"indigo"}},[t._v("mdi-tram")]),t._v(" 可骑车/电车 ")]},proxy:!0}])})],1)],1)],1)],1)],1),e(c.A,{attrs:{id:"container",flat:""}}),e(c.A,{staticClass:"fixed-bottom my-card",attrs:{elevation:"10",tile:"",color:"indigo",hover:""}},[e(et.A,{staticClass:"my-2 mx-5 white-background",attrs:{"prepend-inner-icon":"mdi-navigation-variant",placeholder:"输出规划的路径：",label:"输出路径：","auto-grow":"",outlined:"",dense:"",rows:"1",rounded:"","hide-details":""},model:{value:t.pathOutput,callback:function(e){t.pathOutput=e},expression:"pathOutput"}})],1)],1)},ot=[],at=s(6722),it={data(){return{startSelectedNode:"",to_id:"",graph:null,finalSelectedNode:"",finalSelectedNode1:"",strategy:0,transportation:0,points:[],tooltip:null,pathOutput:""}},computed:{backendData(){return this.$store.state.routeData.data},mapId(){return this.$store.state.routeData.mapId}},watch:{startSelectedNode(t){console.log(t),this.graph&&this.graph.getNodes().forEach((e=>{e.getModel().label===t?this.graph.setItemState(e,"start_selected",!0):this.graph.setItemState(e,"start_selected",!1)}))},finalSelectedNode(t){if(console.log(t),this.graph){const e=t.split(" ");this.graph.getNodes().forEach((t=>{e.includes(t.getModel().label)?this.graph.setItemState(t,"final_selected",!0):this.graph.setItemState(t,"final_selected",!1)}))}}},mounted(){console.log("返回数据1:",this.$store.state.routeData.data),console.log("返回mapId:",this.$store.state.routeData.mapId);const t={nodes:[],edges:[]};console.log("数据被定义"),Object.keys(this.backendData.data.points).forEach((e=>{const s=this.backendData.data.points[e];t.nodes.push({id:s.pointId,label:s.name,type1:s.type,x:3*s.x,y:3*s.y}),console.log("节点1:",s.pointId)})),Object.keys(this.backendData.data.points).forEach((e=>{const s=this.backendData.data.points[e];s.neighbors.forEach((e=>{t.edges.push({source:s.pointId,target:e.destination,label:`${e.distance.toFixed()}m`})}))}));const e=new at.Ay.Graph({container:"container",width:1200,height:600,defaultNode:{shape:"circle",size:[60],color:"#5B8FF9",style:{fill:"#9EC9FF",lineWidth:3},labelCfg:{style:{fill:"#000",fontSize:15}}},defaultEdge:{style:{stroke:"#F6BD16",lineWidth:2},labelCfg:{autoRotate:!0}},modes:{default:["zoom-canvas","drag-canvas"]},grid:{cell:10,show:!0,line:{stroke:"#aaa",lineWidth:1,lineAppendWidth:3}},nodeStateStyles:{start_selected:{fill:"white",stroke:"orange",lineWidth:3,shadowColor:"orange",shadowBlur:10,shadowOffsetX:0,shadowOffsetY:0,shadowOpacity:.5},final_selected:{fill:"white",stroke:"green",lineWidth:3,shadowColor:"green",shadowBlur:10,shadowOffsetX:0,shadowOffsetY:0,shadowOpacity:.5}},edgeStateStyles:{selected1:{stroke:"#5B8FF9",lineWidth:2,endArrow:{path:at.Ay.Arrow.vee(5,10,5)},shadowBlur:10,shadowColor:"#5B8FF9",shadowOffsetX:0,shadowOffsetY:0,shadowOpacity:.5}}});this.tooltip=new at.Ay.Tooltip({getContent:t=>{const e=t.item.getModel(),s=e.type1,o=this.getImageByType(s);return`<img src="${o}" style="width:200px;height:200px;"/>`},offsetX:-100,offsetY:-100,itemTypes:["node"]}),e.data(t),e.render(),this.graph=e,this.graph.addPlugin(this.tooltip),this.graph.on("node:mouseenter",this.handleNodeMouseEnter),this.graph.on("node:mouseleave",this.handleNodeMouseLeave)},methods:{handleNodeMouseEnter(t){const e=t.item;this.graph.setItemState(e,"show-tooltip",!0)},handleNodeMouseLeave(t){const e=t.item;this.graph.setItemState(e,"show-tooltip",!1)},getImageByType(t){const e={"教学楼":"assets/teachingbuilding.jpg","宿舍楼":"assets/dormitory.jpg","办公楼":"assets/officebuilding.jpg","商店":"assets/shop.jpg","餐馆":"assets/restaurant.jpg","图书馆":"assets/library.jpg","体育馆":"assets/gym.jpg","景点":"assets/attraction.jpg","卫生间":"assets/restroom.jpg","咖啡馆":"assets/coffee.jpg","超市":"assets/shop.jpg","停车场":"assets/parking.jpg","休息区":"assets/restarea.jpg","运动场":"assets/sportsfield.jpg","报告厅":"assets/lecturehall.jpg","绿化区":"assets/greenland.jpg","地标":"assets/landmark.jpg","路口":"assets/crossing.jpg","食堂":"assets/canteen.jpg","奶茶店":"https://img1.baidu.com/it/u=3106223159,2776000347&fm=253&fmt=auto&app=138&f=JPEG?w=500&h=543"};return e[t]||"https://i.pinimg.com/474x/94/c1/12/94c1122db55e148274c66160377206fd.jpg"},getPoints(){this.points=[],this.graph.getNodes().forEach((t=>{t.getModel().label===this.startSelectedNode&&(this.points.push(t.getModel().id),console.log("Points:",this.points))}));const t=this.finalSelectedNode.split(" ");t.forEach((t=>{this.graph.getNodes().forEach((e=>{e.getModel().label===t&&(this.points.push(e.getID()),console.log("Points:",this.points))}))}))},orderedTour(){this.pathOutput="",this.getPoints();const t={mapID:this.mapId,points:this.points,strategy:this.strategy,transportation:this.transportation},e="http://10.129.37.114:8321/routePlanningInOrder";this.$axios.post(e,t).then((t=>{console.log("路径1规划成功:",t.data),this.graph.getNodes().forEach((t=>{const e=t.getModel();this.points.includes(e.id)||this.graph.setItemState(t,"selected",!1)})),this.graph.getEdges().forEach((t=>{this.graph.setItemState(t,"selected",!1),this.graph.setItemState(t,"selected1",!1),this.graph.updateItem(t,{style:{endArrow:!1,startArrow:!1,stroke:"#F6BD16",lineWidth:2,shadowBlur:0}})}));const e=t.data.data.length;t.data.data.forEach(((t,s)=>{console.log(t.edgeId),this.graph.getNodes().forEach((e=>{const s=e.getModel();s.id!==t.sourcePointId&&s.id!==t.destinationPointId||this.points.includes(s.id)||(this.graph.setItemState(e,"selected",!0),console.log("显示点的变化"))})),this.graph.getEdges().forEach((o=>{const a=o.getModel();if((a.source===t.sourcePointId&&a.target===t.destinationPointId||a.source===t.destinationPointId&&a.target===t.sourcePointId)&&(this.graph.updateItem(o,{style:{stroke:1===t.routeMethod?"blue":"#5B8FF9",lineWidth:10*t.congestion,shadowBlur:10,shadowColor:1===t.routeMethod?"blue":"#5B8FF9",shadowOffsetX:0,shadowOffsetY:0,shadowOpacity:.5}}),console.log("routeMethod:",t.routeMethod)),a.source===t.sourcePointId&&a.target===t.destinationPointId){this.graph.updateItem(o,{style:{endArrow:{path:at.Ay.Arrow.vee(5,10,5),d:10,fill:"red",stroke:"red"}}});let a="";if(this.graph.getNodes().forEach((e=>{const s=e.getModel();s.id===t.sourcePointId&&(a=s.label)})),console.log("打印：",a),this.pathOutput+=`${a}—>`,s===e-1){console.log("最后一次！");let e="";this.graph.getNodes().forEach((s=>{const o=s.getModel();o.id===t.destinationPointId&&(e=o.label)})),this.pathOutput+=`${e}`}}}))}))})).catch((t=>{console.error("路径1规划失败:",t)}))},unorderedTour(){this.pathOutput="",this.getPoints();const t={mapID:this.mapId,points:this.points,strategy:this.strategy,transportation:this.transportation},e="http://10.129.37.114:8321/routePlanningNotInOrder";this.$axios.post(e,t).then((t=>{console.log("路径2规划成功:",t.data),this.graph.getNodes().forEach((t=>{const e=t.getModel();this.points.includes(e.id)||this.graph.setItemState(t,"selected",!1)})),this.graph.getEdges().forEach((t=>{this.graph.setItemState(t,"selected",!1),this.graph.setItemState(t,"selected1",!1),this.graph.updateItem(t,{style:{endArrow:!1,startArrow:!1,stroke:"#F6BD16",lineWidth:2,shadowBlur:0}})}));const e=t.data.data.length;t.data.data.forEach(((t,s)=>{console.log(t.edgeId),this.graph.getNodes().forEach((e=>{const s=e.getModel();s.id!==t.sourcePointId&&s.id!==t.destinationPointId||this.points.includes(s.id)||(this.graph.setItemState(e,"selected",!0),console.log("显示点的变化"))})),this.graph.getEdges().forEach((o=>{const a=o.getModel();if((a.source===t.sourcePointId&&a.target===t.destinationPointId||a.source===t.destinationPointId&&a.target===t.sourcePointId)&&(this.graph.updateItem(o,{style:{stroke:1===t.routeMethod?"blue":"#5B8FF9",lineWidth:10*t.congestion,shadowBlur:10,shadowColor:1===t.routeMethod?"blue":"#5B8FF9",shadowOffsetX:0,shadowOffsetY:0,shadowOpacity:.5}}),console.log("routeMethod:",t.routeMethod)),a.source===t.sourcePointId&&a.target===t.destinationPointId){this.graph.updateItem(o,{style:{endArrow:{path:at.Ay.Arrow.vee(5,10,5),d:10,fill:"red",stroke:"red"}}});let a="";if(this.graph.getNodes().forEach((e=>{const s=e.getModel();s.id===t.sourcePointId&&(a=s.label)})),console.log("打印：",a),this.pathOutput+=`${a}—>`,s===e-1){console.log("最后一次！");let e="";this.graph.getNodes().forEach((s=>{const o=s.getModel();o.id===t.destinationPointId&&(e=o.label)})),this.pathOutput+=`${e}`}}}))}))})).catch((t=>{console.error("路径2规划失败:",t)}))}}},nt=it,rt=(0,_.A)(nt,st,ot,!1,null,"13529fd3",null),lt=rt.exports,ct=s(3150),dt=function(){var t=this,e=t._self._c;return e(a.A,[e(N.A,[e(N.A,{staticClass:"pb-0",attrs:{"d-flex":""}},[e(l.A,{staticClass:"mr-2 font-weight-black",attrs:{rounded:"",color:"indigo",dark:""},on:{click:t.toggleSearchMode}},[e(h.A,{attrs:{left:""}},[t._v(" "+t._s(t.isHot?"mdi-fire":"mdi-marker-check"))]),t._v(" "+t._s(t.isHot?"热度":"评分"))],1),e("div",{staticStyle:{position:"relative",width:"80%"}},[e(z.A,{attrs:{"offset-y":"","nudge-top":"20","close-on-content-click":"false"},scopedSlots:t._u([{key:"activator",fn:function({on:s,attrs:o}){return[e(O.A,t._g(t._b({attrs:{label:"搜索游学日记","append-icon":"mdi-magnify",clearable:"",outlined:"",dense:""},on:{input:t.search},model:{value:t.searchQuery,callback:function(e){t.searchQuery=e},expression:"searchQuery"}},"v-text-field",o,!1),s))]}}]),model:{value:t.display,callback:function(e){t.display=e},expression:"display"}},[e(u.A,[e("router-link",{staticClass:"text-decoration-none",attrs:{to:"/RoutePlan"}},t._l(t.searchResults,(function(s){return e(p.A,{key:s.id,on:{click:function(e){return e.stopPropagation(),t.selectResult(s)}}},[e(h.A,{staticClass:"mr-3"},[t._v("mdi-notebook")]),e(g.UZ,[t._v(t._s(s.title))]),e(g.w,{domProps:{innerHTML:t._s(t.highlightSearchQuery(s.content))}})],1)})),1)],1)],1)],1)],1),e(N.A,{attrs:{"pt-0":""}},[e(Q.A,{attrs:{column:"","active-class":"indigo--text",mandatory:""},model:{value:t.sortKey,callback:function(e){t.sortKey=e},expression:"sortKey"}},[e(W.A,{attrs:{filter:"",outlined:"",value:"heatness"}},[t._v("热度")]),e(W.A,{attrs:{filter:"",outlined:"",value:"rating"}},[t._v("评分")])],1),e(N.A,[e(U.A,t._l(t.sortedDiaries,(function(s){return e(H.A,{key:s.id,attrs:{cols:"4"}},[e(c.A,{attrs:{hover:""}},[e(I.ri,{staticClass:"font-weight-bold"},[t._v(t._s(s.title))]),e("v-subtitle",{staticClass:"font-weight-bold"},[e(U.A,{attrs:{justify:"space-between"}},[e(H.A,{attrs:{cols:"auto"}},[e(h.A,{staticClass:"ml-3",attrs:{left:"",color:"indigo"}},[t._v("mdi-account")]),t._v(t._s(s.author)+" ")],1),t._v(" "),e(H.A,{attrs:{cols:"auto"}},[e(h.A,{attrs:{color:"red"}},[t._v("mdi-map-marker")]),e("span",{staticClass:"mr-3 font-weight-bold"},[t._v(t._s(s.location))])],1)],1)],1),e(d.A,{staticClass:"mx-15 mt-3"}),e(I.OQ,{class:{"description-clamp-2":!t.expandedDiaries[s.id]}},[t._v(" "+t._s(s.content)+" ")]),e(I.OQ,{directives:[{name:"show",rawName:"v-show",value:t.expandedDiaries[s.id],expression:"expandedDiaries[diary.id]"}],staticClass:"pl-2 font-weight-black deep-orange--text mt-0"},[t._v(" 评分： "),e(ct.A,{staticClass:"ml-0",attrs:{"background-color":"grey darken-1","empty-icon":"$ratingFull",color:"yellow accent-4",dense:"","half-increments":"",hover:"",size:"20"},model:{value:t.rating,callback:function(e){t.rating=e},expression:"rating"}})],1),e(I.SL,{staticClass:"mt-3"},[e(U.A,{staticClass:"d-flex justify-space-between"},[e("div",{staticClass:"d-flex"},[e("div",{staticClass:"ml-2"},[e(h.A,{attrs:{color:"orange"}},[t._v("mdi-fire")]),e("span",{staticClass:"ml-1 font-weight-bold text--secondary"},[t._v(t._s(s.heatness))])],1),e("div",{staticClass:"ml-2"},[e(h.A,{attrs:{color:"deep-orange"}},[t._v("mdi-thumb-up")]),e("span",{staticClass:"ml-1 font-weight-bold text--secondary"},[t._v(t._s(s.rating))])],1)]),e("div",[e(l.A,{staticClass:"transparent-btn text--secondary font-weight-bold text-decoration-none mr-2 mb-1",attrs:{elevation:"0"},on:{click:function(e){return t.toggleDiary(s.id)}}},[t._v(t._s(t.expandedDiaries[s.id]?"收起全文":"阅读全文")),e(h.A,{staticClass:"ml-1",attrs:{color:"gray",right:""}},[t._v("mdi-chevron-right")])],1)],1)])],1)],1)],1)})),1)],1)],1),e("router-link",{attrs:{to:"/DiaryEdit"}},[e(l.A,{staticClass:"fixed-button",attrs:{large:"",color:"indigo",dark:"",fab:""}},[e(h.A,[t._v("mdi-pencil")])],1)],1)],1)],1)},ht=[],ut={data:()=>({isHot1:"heatness",isHot:!0,sortKey:"heatness",searchQuery:"",searchResults1:[],diaries:[{id:1,title:"清华园的春天",author:"Azr",content:"今天，我踏入了著名的清华园，春意盎然，百花齐放。一进入校园，就被那股浓郁的学术氛围和历史沉淀所吸引。清华园不仅是学问的殿堂，更是自然美景的汇聚地。清晨，我沿着曲径通幽的小路漫步，两旁的樱花树如云似霞，粉白色的花瓣随风飘落，像是天空中飘洒的雪花。我不禁停下脚步，仰头欣赏这场春天的雪。午后，我来到了紫荆广场，广场上学生们的活力与这春日的暖阳相得益彰。一群学生在草坪上讨论着学术问题，他们的声音充满了对知识的渴望和对未来的憧憬。傍晚时分，我漫步至清华大学的水木清华园，那里的景色宁静而又和谐。水面波光粼粼，倒映着夕阳的余晖。几只野鸭戏水，搅动起一圈圈涟漪。夜幕降临，清华园依旧灯火通明，图书馆里传来窸窸窣窣的书页翻动声。我在这里感受到了学术的严谨与深邃，也感受到了春天的生机与希望。这一天的游学体验，让我深深地被清华园的春天所打动。在这里，每一步都能感受到历史与现代的交融，每一次呼吸都充满了知识的芬芳。清华园的春天，不仅是自然界的盛宴，更是心灵的洗礼。明天，我将继续我的探索之旅，期待在清华园的每个角落都能发现新的惊喜。",location:"清华大学",rating:4.8,heatness:100},{id:2,title:"北大的秋日",author:"Txy",content:"今天，我漫步在北京大学的校园里，感受着秋天的气息。秋风送爽，阳光和煦，北大的秋日如同一幅精致的画卷，缓缓展开在我的眼前。清晨，我穿过了拥有百年历史的博雅塔，它静静地伫立在悠长的时光里。落叶在轻风中飘落，铺成了一条金黄色的道路。我踏着这条道路，仿佛走进了历史的长河。午后，我来到了未名湖边，湖水清澈见底，湖面上漂浮着几片落叶，宛如画家笔下的点缀。我坐在湖边的长椅上，看着对岸的博雅塔倒映在水中，心中涌起一股宁静。傍晚，我在未名湖旁的草地上找到了一片空地，与朋友们一起享受着秋日的温暖。我们谈论着未来的梦想，讨论着学术的疑惑，周围的景色让这一切显得更加美好。夜幕降临，我在图书馆的窗前静静地站了很久。图书馆的灯光如同星星一般点缀在夜空中，学子们依旧埋头于书海，追寻着知识的光芒。北大的秋日，给了我无限的遐想和灵感。在这里，我不仅学到了知识，更感受到了生活的美好。秋天的北大，是一个充满诗意和智慧的地方，我将这一天的记忆珍藏在心底。明天，我还会继续在这片充满智慧的土地上探索，希望能在这个秋天，收获更多的知识和美好的回忆。",location:"北京大学",rating:4.9,heatness:80},{id:3,title:"北师的冬日",author:"Yyj",content:"今天，我踏入了北京师范大学，这里的冬日别有一番风味。虽然寒风凛冽，但校园里依然充满了温暖的气息。清晨，我穿过校园的主道，两旁的枯树在冬日的阳光下显得格外坚韧。雪花轻轻飘落，覆盖了整个校园一层洁白的银装，让北师的每一角落都变得如诗如画。午后，我来到了图书馆前的广场，看到学生们不畏严寒，或聚在一起讨论学术，或独自沉浸在书本世界中。他们的身影在雪地上拉出了长长的影子，仿佛是冬日里最美的风景。傍晚，我沿着校园内的小路漫步，路过一片被雪覆盖的草坪。几个孩子在那里堆雪人，欢声笑语在寒风中飘扬，让人忘却了冬日的寒冷。夜幕降临，北师的灯光亮起，温暖而又明亮。我在教学楼前停下脚步，远处传来了朗朗的读书声，那是北师学子们对知识的执着追求。北师的冬日，虽然没有了春花的绚烂，夏叶的繁茂，秋果的丰硕，但有了冬雪的纯洁和学子们的热情。在这里，我感受到了北师独特的学术氛围和生活的节奏。明天，我将继续在这片充满活力的土地上探索，希望能在这个冬天，收获更多的知识和温暖的回忆。",location:"北京师范大学",rating:5,heatness:60},{id:4,title:"北邮的夏日",author:"Gqh",content:"今天，我来到了北京邮电大学，这里的夏日充满了青春的活力和科技的气息。阳光明媚，微风不燥，北邮的校园里洋溢着夏天的热情。清晨，我在校园里散步，看到学生们或是在晨跑，或是在图书馆前讨论着学术问题。校园里的每个角落都充满了朝气蓬勃的氛围。午后，我参观了北邮的实验室，见证了学生们如何利用先进的科技进行创新研究。他们专注的神情和不断尝试的精神让我深受感动。傍晚，我来到了学校的运动场，看到学生们在进行各种体育活动，篮球场上，球员们奋力拼搏，汗水与阳光交织成了夏日最美的风景。夜晚，我在宿舍区散步，轻风带来了一丝凉意，学生们三三两两地坐在长椅上，享受着夏夜的宁静。北邮的夏日，是充满希望和梦想的。在这里，我不仅感受到了知识的力量，也感受到了青春的热情。明天，我将继续探索这个充满活力的校园，期待能发现更多的故事和灵感。",location:"北京邮电大学",rating:4.2,heatness:40},{id:5,title:"人民大学的晨曦",author:"Lxy",content:"清晨的中国人民大学格外宁静，阳光透过树梢，洒在我脸上，带来一丝温暖。我在校园里慢跑，感受着新的一天的开始。学生们陆续走出宿舍，开始他们忙碌的一天。图书馆前，已有人在等待开门，准备投入到知识的海洋中。午后的阳光照在图书馆的台阶上，学生们坐在那里，享受着温暖的阳光，讨论着学术问题。我在校园的每个角落都能感受到知识的力量和学生们的活力。夜晚，我参加了一个学术讲座，教授们的见解深刻，学生们的提问尖锐，让我受益匪浅。在人民大学的每一天，都是充满学习和发现的一天。",location:"中国人民大学",rating:3.4,heatness:50},{id:6,title:"中央民族大学的多彩午后",author:"Wzh",content:"中央民族大学的校园里，各种民族的文化交织在一起，形成了一道独特的风景。午后的阳光下，学生们身着各自民族的服饰，展示着他们丰富多彩的文化。我在这里学习到了不同民族的历史和习俗，感受到了中国文化的博大精深。图书馆里，书架上摆满了关于民族文化的书籍，我在那里度过了一个下午，沉浸在书海中。晚上，我参加了一个民族音乐会，音乐优美动听，让我仿佛置身于一个多彩的世界。",location:"中央民族大学",rating:4,heatness:70},{id:7,title:"北航的科技梦",author:"Zj",content:"在北京航空航天大学，我被这里的创新精神和科技氛围所吸引。学生们在实验室里忙碌着，他们的眼中闪烁着对未来的憧憬。无人机在天空中飞翔，仿佛在诉说着北航学子们的科技梦。图书馆里，我看到了许多关于航空航天的专业书籍，学生们认真地阅读着，不时地进行讨论。晚上，我在学校的观星台上，看着满天的星辰，感受着宇宙的浩瀚和人类探索的勇气。",location:"北京航空航天大学",rating:3.2,heatness:85},{id:8,title:"北理工的创造力",author:"Mm",content:"北京理工大学的校园里，处处可见学生们的创造力和实践能力。他们在制作机器人，参与国际比赛，展示着他们的才华。我在这里感受到了工程学的魅力，以及将理论知识转化为实践的重要性。实验室里，学生们正在研究新型材料，他们的热情和专注让我深受感染。晚上，我在学校的创新中心里，看到了学生们为了完成他们的项目而通宵达旦的努力。",location:"北京理工大学",rating:4.5,heatness:65},{id:9,title:"北外的语言之旅",author:"Qx",content:"在北京外国语大学，我仿佛踏上了一场世界语言的旅行。校园里，不同国家的语言交织在一起，形成了一幅美妙的交响乐。学生们热情地交流着，用他们流利的多国语言，让我感受到了语言学习的乐趣。图书馆的外语区域里，我发现了各种各样的语言学习资料，从书籍到音频，应有尽有。晚上，我参加了一个国际文化交流活动，学生们分享了他们的留学经历和文化体验，让我开阔了眼界",location:"北京外国语大学",rating:5,heatness:55},{id:10,title:"北师大的文学之夜",author:"Lh",content:"北京师范大学的夜晚，我参加了一场文学讲座。教授们的讲解深入浅出，学生们的讨论热烈而有见地。在这里，我感受到了文学的力量，以及它在人类文明中的重要地位。",location:"北京师范大学",rating:2.8,heatness:75},{id:11,title:"北工大的工匠精神",author:"Zy",content:"在北京工业大学，我看到了学生们的工匠精神。他们在工作坊里精心打造着各种作品，每一个细节都力求完美。这里的学习氛围让我深受感染，也激发了我对工程技术的兴趣。",location:"北京工业大学",rating:3.8,heatness:60},{id:12,title:"北交大的交通梦",author:"Wx",content:"北京交通大学是交通工程的摇篮。我参观了他们的铁道博物馆，了解了中国铁路的发展历史。学生们在模拟驾驶室里操作着，体验着驾驶列车的快感。这里的学习不仅是理论，更多的是实践。",location:"北京交通大学",rating:3,heatness:50},{id:13,title:"北农的绿色未来",author:"Hj",content:"在中国农业大学，我被这里的绿色科技所吸引。学生们在田间地头实践着，研究着如何让农作物更加健康地成长。这里的学习是为了未来的食品安全和可持续发展。",location:"中国农业大学",rating:4.2,heatness:70},{id:14,title:"北中医的健康之道",author:"Lw",content:"在北京中医药大学，我学习了中医的智慧。学生们在实验室里研制中药，探索着古老医学与现代科技的结合。在这里，我感受到了中医对健康的深刻理解，以及它在现代社会中的价值。",location:"北京中医药大学",rating:4.4,heatness:80},{id:15,title:"北邮",author:"Txy",content:"北京邮电大学",location:"北京邮电大学",rating:0,heatness:0}],display:!1,expandedDiaries:{}}),computed:{sortedDiaries(){const t=[...this.diaries];return t.sort(((t,e)=>e[this.sortKey]-t[this.sortKey]))},searchResults(){const t=[...this.searchResults1];return t.sort(((t,e)=>e[this.isHot1]-t[this.isHot1]))},userdiary(){return this.$store.state.diary}},mounted(){this.diaries.forEach((t=>{this.$set(this.expandedDiaries,t.id,!1)})),console.log("userdiary:",this.userdiary)},methods:{toggleDiary(t){this.$set(this.expandedDiaries,t,!this.expandedDiaries[t]),console.log(this.expandedDiaries[t]),console.log("expandedDiaries:",this.expandedDiaries)},search(){let t=[];for(let e of this.diaries)e.title.includes(this.searchQuery)&&t.push(e);for(let e of this.diaries)e.content.includes(this.searchQuery)&&(t.includes(e)||t.push(e));this.searchResults1=t},highlightSearchQuery(t){const e=t.indexOf(this.searchQuery);if(-1===e)return t;const s=Math.max(0,e-10),o=Math.min(t.length,e+this.searchQuery.length+10),a=`<strong>${this.searchQuery}</strong>`;return t.slice(s,e)+a+t.slice(e+this.searchQuery.length,o)},selectResult(t){console.log("选中的搜索结果:",t)},toggleSearchMode(){this.isHot=!this.isHot,this.isHot1=this.isHot?"heatness":"rating"},beforeDestroy(){document.removeEventListener("click",this.hideList)},hideList(t){!this.$refs.searchList||this.$refs.searchList.$el.contains(t.target)||this.$refs.searchInput.$el.contains(t.target)||(this.display=!1)}}},pt=ut,gt=(0,_.A)(pt,dt,ht,!1,null,null,null),mt=gt.exports,ft=function(){var t=this,e=t._self._c;return e(N.A,[e(J.A,{on:{submit:function(e){return e.preventDefault(),t.saveDiary.apply(null,arguments)}}},[e(U.A,[e(H.A,{attrs:{cols:"8"}},[e(O.A,{staticClass:"mt-5",attrs:{"prepend-inner-icon":"mdi-pencil",label:"日记标题",required:""},model:{value:t.diary.title,callback:function(e){t.$set(t.diary,"title",e)},expression:"diary.title"}})],1)],1),e(U.A,{staticClass:"mt-0 pt-0"},[e(H.A,{attrs:{cols:"4"}},[e(O.A,{staticClass:"mt-5",attrs:{"prepend-inner-icon":"mdi-account",label:"作者",required:""},model:{value:t.diary.author,callback:function(e){t.$set(t.diary,"author",e)},expression:"diary.author"}})],1),e(H.A,{attrs:{cols:"4"}},[e(O.A,{staticClass:"mt-5",attrs:{"prepend-inner-icon":"mdi-map-marker",label:"游学地点",required:""},model:{value:t.diary.location,callback:function(e){t.$set(t.diary,"location",e)},expression:"diary.location"}})],1)],1),e("ckeditor",{attrs:{editor:t.editor,config:t.editorConfig},model:{value:t.diary.content,callback:function(e){t.$set(t.diary,"content",e)},expression:"diary.content"}}),e(l.A,{staticClass:"mt-5 font-weight-bold",attrs:{type:"submit",color:"indigo",rounded:"",dark:""},on:{click:t.saveDiary}},[t._v("保存日记")])],1)],1)},yt=[],vt=s(2819),bt=s.n(vt),wt=s(7020),At=s.n(wt),xt={components:{ckeditor:At().component},data(){return{diary:{title:"",content:"",author:"",location:""},editor:bt(),editorConfig:{}}},methods:{saveDiary(){this.$store.commit("setDiary",this.diary),this.success()},success(){alert("日记保存成功！")}}},_t=xt,Ct=(0,_.A)(_t,ft,yt,!1,null,null,null),kt=Ct.exports,St=s(566),It=s(1906),Nt=s(7410),Tt=function(){var t=this,e=t._self._c;return e(a.A,[e(c.A,{staticClass:"mb-8",attrs:{hover:"",dense:""}},[e(N.A,{staticClass:"pb-0 mt-3",attrs:{"d-flex":""}},[e("div",{staticStyle:{position:"relative",width:"100%"}},[e(U.A,[e(H.A,{attrs:{cols:"2"}},[e(O.A,{attrs:{outlined:"",dense:"",label:"查询类型","append-icon":"mdi-magnify"},on:{input:t.searchType},model:{value:t.selection1,callback:function(e){t.selection1=e},expression:"selection1"}})],1),e(Nt.A),e(H.A,{attrs:{cols:"10"}},[e(Q.A,{attrs:{dense:"","active-class":"indigo--text text--accent-4 font-weight-black",mandatory:"","center-active":"","show-arrows":""},model:{value:t.selection,callback:function(e){t.selection=e},expression:"selection"}},t._l(t.filters,(function(s){return e(W.A,{key:s,attrs:{value:s}},[t._v(" "+t._s(s)+" ")])})),1)],1)],1)],1)])],1),e(U.A,[e(H.A,{staticClass:"ml-2",attrs:{cols:"2"}},[e(c.A,[e(i.A,{attrs:{dense:"",dark:"",color:"indigo",border:"bottom",elevation:"2"}},[e(n.A,{on:{click:function(e){t.menu=!t.menu}}}),e(St.A,[t._v("查询结果排序")])],1),e(It.Qo,[e(u.A,{directives:[{name:"show",rawName:"v-show",value:t.menu,expression:"menu"}]},t._l(t.selectedNodes,(function(s){return e(p.A,{key:s.id,staticStyle:{width:"100%"},attrs:{dense:""}},[e(g.UZ,{staticClass:"font-weight-bold text--secondary mr-4"},[e(h.A,{staticClass:"mr-2",attrs:{color:"red",small:""}},[t._v("mdi-map-marker")]),t._v(t._s(s.getModel().label)+" ")],1),e(g.w,{staticClass:"font-weight-bold text--secondary"},[e(h.A,{staticClass:"mr-2",attrs:{color:"brown"}},[t._v("mdi-foot-print")]),t._v(t._s(s.getModel().dist)+"m")],1)],1)})),1)],1)],1)],1),e(H.A,{attrs:{cols:"9"}},[e(c.A,{attrs:{id:"container",flat:""}})],1)],1)],1)},jt=[],Mt={data(){return{selection:"不限",filters:["不限","景点","教学楼","办公楼","宿舍楼","商店","餐馆","卫生间","图书馆","食堂","超市","咖啡馆","停车场","休息区","体育馆","运动场","报告厅","绿化区","地标","路口","不限"],startSelectedNode:"",to_id:"",graph:null,finalSelectedNode:"",finalSelectedNode1:"",strategy:0,transportation:0,points:[],tooltip:null,pathOutput:"",backendArray:"",selectedNode:null,menu:!0,selectedNodes:[]}},computed:{backendData(){return this.$store.state.routeData.data},mapId(){return this.$store.state.routeData.mapId}},watch:{selection(){this.selectedNode&&this.updateNodeStates(this.selectedNode)}},mounted(){console.log("menu:",this.menu),console.log("selection:",this.selection),console.log("mapId:",this.mapId),console.log("返回数据2:",this.backendData),console.log("返回mapId:",this.mapId);const t={nodes:[],edges:[]};console.log("数据被定义"),Object.keys(this.backendData.data.points).forEach((e=>{const s=this.backendData.data.points[e];t.nodes.push({id:s.pointId,label:s.name,type1:s.type,x:3*s.x,y:3*s.y}),console.log("节点2:",s.pointId)})),Object.keys(this.backendData.data.points).forEach((e=>{const s=this.backendData.data.points[e];s.neighbors.forEach((e=>{t.edges.push({source:s.pointId,target:e.destination,label:`${e.distance.toFixed()}m`})}))}));const e=new at.Ay.Graph({container:"container",width:1065,height:600,defaultNode:{shape:"circle",size:[60],color:"#5B8FF9",style:{fill:"#9EC9FF",lineWidth:3},labelCfg:{style:{fill:"#000",fontSize:15}}},defaultEdge:{style:{stroke:"#F6BD16",lineWidth:2},labelCfg:{autoRotate:!0}},modes:{default:["zoom-canvas","drag-canvas"]},grid:{cell:10,show:!0,line:{stroke:"#aaa",lineWidth:1,lineAppendWidth:3}},nodeStateStyles:{start_selected:{fill:"white",stroke:"orange",lineWidth:3,shadowColor:"orange",shadowBlur:10,shadowOffsetX:0,shadowOffsetY:0,shadowOpacity:.5},final_selected:{fill:"white",stroke:"green",lineWidth:3,shadowColor:"green",shadowBlur:10,shadowOffsetX:0,shadowOffsetY:0,shadowOpacity:.5}},edgeStateStyles:{selected1:{stroke:"#5B8FF9",lineWidth:2,endArrow:{path:at.Ay.Arrow.vee(5,10,5)},shadowBlur:10,shadowColor:"#5B8FF9",shadowOffsetX:0,shadowOffsetY:0,shadowOpacity:.5}}});this.tooltip=new at.Ay.Tooltip({getContent:t=>{const e=t.item.getModel(),s=e.type1,o=this.getImageByType(s);return`<img src="${o}" style="width:200px;height:200px;"/>`},offsetX:-100,offsetY:-100,itemTypes:["node"]}),e.data(t),e.render(),this.graph=e,this.graph.addPlugin(this.tooltip),this.graph.on("node:mouseenter",this.handleNodeMouseEnter),this.graph.on("node:mouseleave",this.handleNodeMouseLeave),this.graph.on("node:click",this.handleNodeClick)},methods:{searchType(){this.selection=this.selection1},updateNodeStates(t){this.graph.getNodes().forEach((t=>{this.graph.clearItemStates(t),t.getModel().dist=1/0,this.selectedNodes=[]})),t.getModel().dist=0;const e=this.graph.getEdges(),s=this.graph.getNeighbors(t);s.forEach((s=>{const o=e.find((e=>e.getSource()===t&&e.getTarget()===s));o&&(s.getModel().dist=parseFloat(o.getModel().label)||1);const a="不限"===this.selection||s.getModel().type1===this.selection;if(this.graph.setItemState(s,"final_selected",a),a){const t=this.selectedNodes.some((t=>t===s));t||(this.selectedNodes.push(s),console.log("push_neighbor:",s.getModel().label))}const i=this.graph.getNeighbors(s).filter((e=>e!==t));i.forEach((t=>{const o=e.find((e=>e.getSource()===s&&e.getTarget()===t));if(o){const e=s.getModel().dist+parseFloat(o.getModel().label)||1;e<t.getModel().dist&&(t.getModel().dist=e)}const a="不限"===this.selection||t.getModel().type1===this.selection;if(this.graph.setItemState(t,"final_selected",a),a){const e=this.selectedNodes.some((e=>e===t));e||(this.selectedNodes.push(t),console.log("push_neighbor_of_neighbor:",t.getModel().label))}}))})),this.selectedNodes=this.selectedNodes.filter((e=>e!==t)),this.selectedNodes.sort(((t,e)=>t.getModel().dist-e.getModel().dist)),this.graph.setItemState(t,"selected",!0),console.log("selectedNodes:",this.selectedNodes)},handleNodeClick(t){const e=t.item;this.selectedNode=e,this.updateNodeStates(e)},handleNodeMouseEnter(t){const e=t.item;this.graph.setItemState(e,"show-tooltip",!0)},handleNodeMouseLeave(t){const e=t.item;this.graph.setItemState(e,"show-tooltip",!1)},getImageByType(t){const e={"教学楼":"assets/teachingbuilding.jpg","宿舍楼":"assets/dormitory.jpg","办公楼":"assets/officebuilding.jpg","商店":"assets/shop.jpg","餐馆":"assets/restaurant.jpg","图书馆":"assets/library.jpg","体育馆":"assets/gym.jpg","景点":"assets/attraction.jpg","卫生间":"assets/restroom.jpg","咖啡馆":"assets/coffee.jpg","超市":"assets/shop.jpg","停车场":"assets/parking.jpg","休息区":"assets/restarea.jpg","运动场":"assets/sportsfield.jpg","报告厅":"assets/lecturehall.jpg","绿化区":"assets/greenland.jpg","地标":"assets/landmark.jpg","路口":"assets/crossing.jpg","食堂":"assets/canteen.jpg","奶茶店":"https://img1.baidu.com/it/u=3106223159,2776000347&fm=253&fmt=auto&app=138&f=JPEG?w=500&h=543"};return e[t]||"https://i.pinimg.com/474x/94/c1/12/94c1122db55e148274c66160377206fd.jpg"}}},Ft=Mt,Dt=(0,_.A)(Ft,Tt,jt,!1,null,"9c2c8a7e",null),Ot=Dt.exports,Pt=function(){var t=this,e=t._self._c;return e(a.A,[e(N.A,[e(Q.A,{attrs:{dense:"","active-class":"indigo--text text--accent-4 font-weight-black",mandatory:"","center-active":"","show-arrows":""},model:{value:t.selection,callback:function(e){t.selection=e},expression:"selection"}},t._l(t.filters,(function(s){return e(W.A,{key:s,attrs:{value:s}},[t._v(" "+t._s(s)+" ")])})),1),e(N.A,{staticClass:"pb-0",attrs:{"d-flex":""}},[e("div",{staticStyle:{position:"relative",width:"100%"}},[e(z.A,{attrs:{"offset-y":"","nudge-top":"20","close-on-content-click":!1},scopedSlots:t._u([{key:"activator",fn:function({on:s,attrs:o}){return[e(O.A,t._g(t._b({staticStyle:{width:"100%"},attrs:{label:"搜索美食",placeholder:"来一场美食之旅","append-icon":"mdi-magnify",clearable:"",outlined:"",dense:""},on:{input:t.search},model:{value:t.searchContent,callback:function(e){t.searchContent=e},expression:"searchContent"}},"v-text-field",o,!1),s))]}}]),model:{value:t.display,callback:function(e){t.display=e},expression:"display"}},[e(u.A,t._l(t.items,(function(s){return e(p.A,{key:s.foodId,staticStyle:{width:"100%"},attrs:{dense:""}},[e(h.A,{staticClass:"mr-3"},[t._v("mdi-food-turkey")]),e(g.UZ,{staticClass:"font-weight-bold text--secondary mr-4"},[e(U.A,{attrs:{align:"center",justify:"space-between"}},[e(H.A,{attrs:{cols:"auto"}},[t._v(t._s(s.name))]),e(H.A,{attrs:{cols:"auto"}},[e(h.A,{staticClass:"mr-1",attrs:{small:""}},[t._v("mdi-fire")]),e("span",{staticClass:"ml-1 font-weight-bold text--secondary text-caption mr-2"},[t._v(t._s(String(s.population).padEnd(2," ")))]),e(h.A,{staticClass:"mr-1",attrs:{small:""}},[t._v("mdi-thumb-up")]),e("span",{staticClass:"ml-1 font-weight-bold text--secondary text-caption mr-2"},[t._v(t._s(s.score.toFixed(2)))])],1)],1)],1)],1)})),1)],1)],1)]),e(N.A,{attrs:{"pt-0":""}},[e(Q.A,{attrs:{column:"","active-class":"indigo--text",mandatory:""},model:{value:t.selectedFilters,callback:function(e){t.selectedFilters=e},expression:"selectedFilters"}},[e(W.A,{attrs:{filter:"",outlined:"",value:"population"}},[t._v("热度")]),e(W.A,{attrs:{filter:"",outlined:"",value:"score"}},[t._v("评价")]),e(W.A,{attrs:{filter:"",outlined:"",value:"distance"}},[t._v("距离")])],1),e(N.A,[e(U.A,t._l(t.items,(function(s){return e(H.A,{key:s.foodId,attrs:{cols:"4"}},[e(c.A,{attrs:{hover:""}},[e(T.A,{attrs:{src:s.imageUrl,height:"200px",cover:""}}),e(I.ri,{staticClass:"font-weight-bold mx-1"},[t._v(t._s(s.name)+" "),e(W.A,{staticClass:"ml-2",attrs:{color:"indigo",small:"","text-color":"white"}},[t._v(t._s(s.style))])],1),e(I.ZR,[e(h.A,{attrs:{color:"red"}},[t._v("mdi-map-marker")]),e("span",{staticClass:"ml-1 font-weight-bold text--secondary"},[t._v(t._s(s.restaurantName))]),e(h.A,{attrs:{color:"brown"}},[t._v("mdi-foot-print")]),e("span",{staticClass:"ml-1 font-weight-bold text--secondary"},[t._v(t._s(s.distance)+"m")])],1),e(I.SL,{staticClass:"d-flex justify-space-between"},[e("div",{staticClass:"d-flex"},[e("div",[e(h.A,{attrs:{color:"orange"}},[t._v("mdi-fire")]),e("span",{staticClass:"ml-1 font-weight-bold text--secondary"},[t._v(t._s(s.population))])],1),e("div",{staticClass:"ml-2"},[e(h.A,{attrs:{color:"indigo"}},[t._v("mdi-thumb-up")]),e("span",{staticClass:"ml-1 font-weight-bold text--secondary"},[t._v(t._s(s.score.toFixed(2)))])],1)]),e("div",[e(l.A,{staticClass:"transparent-btn text--secondary font-weight-bold text-decoration-none",attrs:{rounded:"",elevation:"0"},on:{click:function(e){return t.sendMapId(s.mapType)}}},[t._v("尝一尝"),e(h.A,{staticClass:"ml-1",attrs:{color:"gray",right:""}},[t._v("mdi-chevron-right")])],1)],1)])],1)],1)})),1)],1)],1)],1)],1)},Et=[],$t={data:()=>({searchContent:"",searchResults:[],items:[],selectedFilters:0,selection:"不限",filters:["不限","美式快餐","中式面食","日式料理","意大利菜","中式小吃","咖啡","川菜","鲁菜","粤菜","湘菜","淮扬菜","闽菜","浙菜","徽菜","豫菜","烧烤"],display:!1}),computed:{orderType:function(){return this.selectedFilters}},watch:{orderType(t){console.log("orderType:",t),this.$axios.post("http://10.129.37.114:8321/searchFood",{orderType:t,searchStyle:"不限"===this.selection?"":this.selection,searchContent:this.searchContent}).then((t=>{this.items=t.data.data,console.log("从后端返回的数据:",t.data.data),console.log("searchContent:",this.searchContent),console.log("searchStyle:",this.selection)})).catch((t=>{console.error(t)}))},selection(t){console.log("orderType:",t),this.$axios.post("http://10.129.37.114:8321/searchFood",{orderType:t,searchStyle:"不限"===this.selection?"":this.selection,searchContent:this.searchContent}).then((t=>{this.items=t.data.data,console.log("从后端返回的数据:",t.data.data),console.log("searchContent:",this.searchContent),console.log("searchStyle:",this.selection)})).catch((t=>{console.error(t)}))},selectedFilters(t){console.log("selectedFilters:",t)}},methods:{search(){this.$axios({method:"post",url:"http://10.129.37.114:8321/searchFood",data:{orderType:this.orderType,searchStyle:"不限"===this.selection?"":this.selection,searchContent:this.searchContent},headers:{"Content-Type":"application/json"}}).then((t=>{"0"===t.data.code?(this.items=t.data.data,console.log(this.items)):window.alert("搜索失败，请重试")})).catch((function(t){console.log(t)}))},selectResult(t){console.log("选中的搜索结果:",t)},hideList(){this.display=!1}},mounted(){console.log("orderType:",this.selection),console.log("selectedFilters:",this.selectedFilters),console.log("items:",this.items)},created(){console.log("orderType:",this.selection),this.$axios.post("http://10.129.37.114:8321/searchFood",{orderType:this.orderType,searchStyle:"不限"===this.selection?"":this.selection,searchContent:this.searchContent}).then((t=>{this.items=t.data.data})).catch((t=>{console.error(t)}))}},Rt=$t,Bt=(0,_.A)(Rt,Pt,Et,!1,null,null,null),Lt=Bt.exports;o["default"].use(S.Ay);const Wt=[{path:"/",redirect:"/LoginRegister"},{path:"/LoginRegister",name:"LoginRegister",component:L},{path:"/TravelRecommend",name:"TravelRecommend",component:q},{path:"/RoutePlan",name:"RoutePlan",component:lt},{path:"/DiaryManage",name:"DiaryManage",component:mt},{path:"/DiaryEdit",name:"DiaryEdit",component:kt},{path:"/PlaceSearch",name:"PlaceSearch",component:Ot},{path:"/FoodRecommend",name:"FoodRecommend",component:Lt}],Qt=new S.Ay({routes:Wt});var Ht=Qt,zt=s(5453);o["default"].use(zt.A);var Ut=new zt.A({}),Yt=s(6716),Xt=s(5353);o["default"].use(Xt.Ay);const Zt={routeData:{},diary:{id:15,title:"",athor:"",content:"",location:"",rating:5,heatness:90}},Kt={},Gt={setRouteData(t,e){t.routeData=e},setDiary(t,e){t.diary=e}},qt={};var Jt=new Xt.Ay.Store({state:Zt,actions:Kt,mutations:Gt,getters:qt});o["default"].prototype.$axios=Yt.A,o["default"].use(at.Ay),o["default"].config.productionTip=!1,new o["default"]({router:Ht,vuetify:Ut,store:Jt,render:t=>t(k)}).$mount("#app")},5248:function(t,e,s){t.exports=s.p+"img/Travel.71791bd2.jpg"}},e={};function s(o){var a=e[o];if(void 0!==a)return a.exports;var i=e[o]={id:o,loaded:!1,exports:{}};return t[o].call(i.exports,i,i.exports,s),i.loaded=!0,i.exports}s.m=t,function(){var t=[];s.O=function(e,o,a,i){if(!o){var n=1/0;for(d=0;d<t.length;d++){o=t[d][0],a=t[d][1],i=t[d][2];for(var r=!0,l=0;l<o.length;l++)(!1&i||n>=i)&&Object.keys(s.O).every((function(t){return s.O[t](o[l])}))?o.splice(l--,1):(r=!1,i<n&&(n=i));if(r){t.splice(d--,1);var c=a();void 0!==c&&(e=c)}}return e}i=i||0;for(var d=t.length;d>0&&t[d-1][2]>i;d--)t[d]=t[d-1];t[d]=[o,a,i]}}(),function(){s.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return s.d(e,{a:e}),e}}(),function(){s.d=function(t,e){for(var o in e)s.o(e,o)&&!s.o(t,o)&&Object.defineProperty(t,o,{enumerable:!0,get:e[o]})}}(),function(){s.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"===typeof window)return window}}()}(),function(){s.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)}}(),function(){s.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})}}(),function(){s.nmd=function(t){return t.paths=[],t.children||(t.children=[]),t}}(),function(){s.p="/Data_Structure_Project/"}(),function(){var t={524:0};s.O.j=function(e){return 0===t[e]};var e=function(e,o){var a,i,n=o[0],r=o[1],l=o[2],c=0;if(n.some((function(e){return 0!==t[e]}))){for(a in r)s.o(r,a)&&(s.m[a]=r[a]);if(l)var d=l(s)}for(e&&e(o);c<n.length;c++)i=n[c],s.o(t,i)&&t[i]&&t[i][0](),t[i]=0;return s.O(d)},o=self["webpackChunkvuetifyproject"]=self["webpackChunkvuetifyproject"]||[];o.forEach(e.bind(null,0)),o.push=e.bind(null,o.push.bind(o))}();var o=s.O(void 0,[504],(function(){return s(8666)}));o=s.O(o)})();
//# sourceMappingURL=app.892e697a.js.map